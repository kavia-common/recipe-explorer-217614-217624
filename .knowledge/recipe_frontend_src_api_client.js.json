{"is_source_file": true, "format": "JavaScript", "description": "This file is a source code module implementing a lightweight API client for a Recipe application. It provides functions to construct API base URLs, set authentication tokens, and perform various API requests such as searching recipes, fetching specific recipes, managing saved recipes, and authentication operations. It uses fetch with JSON handling and includes internal logic for handling authorization headers and error management.", "external_files": ["fetch", "not explicitly imported but a built-in browser API"], "external_methods": ["fetch"], "published": ["getApiBase", "setAuthTokenGetter", "api"], "classes": [], "methods": [{"name": "getApiBase()", "description": "Returns the API base URL, prioritizing window.__REACT_APP__.API_BASE, then process.env.REACT_APP_API_BASE, and defaults to 'http://localhost:3001'.", "scope": "", "scopeKind": ""}, {"name": "setAuthTokenGetter(getterFn)", "description": "Registers a getter function that retrieves the JWT token for authentication.", "scope": "", "scopeKind": ""}, {"name": "search", "description": "Search recipes by query string (public endpoint)."}, {"name": "getRecipe", "description": "Fetches a recipe by its ID (public endpoint)."}, {"name": "getSaved", "description": "Retrieve saved recipes for the current user (requires authentication)."}, {"name": "saveRecipe", "description": "Save a recipe for the current user (requires authentication)."}, {"name": "unsaveRecipe", "description": "Remove a saved recipe for the current user (requires authentication)."}, {"name": "login", "description": "Authenticate a user with email and password."}, {"name": "signup", "description": "Register a new user with email and password."}, {"name": "request(path, { method = 'GET', body, headers } = {})", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getApiBase()", "tokenGetter()", "request()", "request().headers.get()", "request().json()", "request().text()"], "search-terms": ["API client", "fetch", "recipe", "authentication", "requests", "authorization", "CORS", "base URL", "service"], "state": 2, "file_id": 13, "knowledge_revision": 68, "git_revision": "ca2445e8e4a36e8d1b80c3f1f99a125818920486", "revision_history": [{"29": ""}, {"58": "00aa747a27ff0af2782596b9efe1e4cd995daf48"}, {"64": "ee31691dc395a52f9baaec93397dc33ce4f5ce45"}, {"68": "ca2445e8e4a36e8d1b80c3f1f99a125818920486"}], "ctags": [{"_type": "tag", "name": "Content-Type", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^     'Content-Type': 'application\\/json',$/", "language": "JavaScript", "kind": "property", "scope": "request.reqHeaders", "scopeKind": "class"}, {"_type": "tag", "name": "DEFAULT_BASE", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^ const DEFAULT_BASE = 'http:\\/\\/localhost:3001';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^ export const api = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^ export function getApiBase() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^   getRecipe: (id) => request(`\\/recipes\\/${id}`),$/", "language": "JavaScript", "kind": "property", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "getSaved", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^   getSaved: () => request(`\\/users\\/me\\/saved`),$/", "language": "JavaScript", "kind": "property", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^   login: (email, password) => request(`\\/auth\\/login`, { method: 'POST', body: { email, passwor/", "language": "JavaScript", "kind": "property", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "reqHeaders", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^   const reqHeaders = {$/", "language": "JavaScript", "kind": "class", "scope": "request", "scopeKind": "class"}, {"_type": "tag", "name": "request", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^ async function request(path, { method = 'GET', body, headers } = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(path, { method = 'GET', body, headers } = {})"}, {"_type": "tag", "name": "saveRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^   saveRecipe: (recipeId) => request(`\\/users\\/me\\/saved`, { method: 'POST', body: { recipe_id: /", "language": "JavaScript", "kind": "property", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^   search: (q) => request(`\\/recipes\\/search?q=${encodeURIComponent(q || '')}`),$/", "language": "JavaScript", "kind": "property", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "setAuthTokenGetter", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^ export function setAuthTokenGetter(getterFn) {$/", "language": "JavaScript", "kind": "function", "signature": "(getterFn)"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^   signup: (email, password) => request(`\\/auth\\/signup`, { method: 'POST', body: { email, passw/", "language": "JavaScript", "kind": "property", "scope": "api", "scopeKind": "class"}, {"_type": "tag", "name": "tokenGetter", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^ let tokenGetter = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "unsaveRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-217614-217624/recipe_frontend/src/api/client.js", "pattern": "/^   unsaveRecipe: (recipeId) => request(`\\/users\\/me\\/saved\\/${encodeURIComponent(recipeId)}`, { /", "language": "JavaScript", "kind": "property", "scope": "api", "scopeKind": "class"}], "hash": "1f751f0cf378591fc0c584ab5aaab72b", "format-version": 4, "code-base-name": "recipe_frontend", "filename": "recipe_frontend/src/api/client.js", "fields": [{"name": "'Content-Type': 'application\\/json',", "scope": "request.reqHeaders", "scopeKind": "class", "description": "unavailable"}, {"name": "getRecipe: (id) => request(`\\/recipes\\/${id}`),", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "getSaved: () => request(`\\/users\\/me\\/saved`),", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "login: (email, password) => request(`\\/auth\\/login`, { method: 'POST', body: { email, passwor/", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "saveRecipe: (recipeId) => request(`\\/users\\/me\\/saved`, { method: 'POST', body: { recipe_id: /", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "search: (q) => request(`\\/recipes\\/search?q=${encodeURIComponent(q || '')}`),", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "signup: (email, password) => request(`\\/auth\\/signup`, { method: 'POST', body: { email, passw/", "scope": "api", "scopeKind": "class", "description": "unavailable"}, {"name": "let tokenGetter = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "unsaveRecipe: (recipeId) => request(`\\/users\\/me\\/saved\\/${encodeURIComponent(recipeId)}`, { /", "scope": "api", "scopeKind": "class", "description": "unavailable"}]}